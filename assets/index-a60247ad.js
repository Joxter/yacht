(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();const En=(e,t)=>e===t,Mn=Symbol("solid-track"),je={equals:En};let Nn=Qt;const oe=1,Be=2,Yt={owned:null,cleanups:null,context:null,owner:null};var P=null;let tt=null,x=null,T=null,re=null,Ke=0;function Ie(e,t){const n=x,r=P,l=e.length===0,i=l?Yt:{owned:null,cleanups:null,context:null,owner:t===void 0?r:t},s=l?e:()=>e(()=>Z(()=>Xe(i)));P=i,x=null;try{return Se(s,!0)}finally{x=n,P=r}}function Kt(e,t){t=t?Object.assign({},je,t):je;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=l=>(typeof l=="function"&&(l=l(n.value)),Xt(n,l));return[Vt.bind(n),r]}function k(e,t,n){const r=Ht(e,t,!1,oe);Ve(r)}function pe(e,t,n){n=n?Object.assign({},je,n):je;const r=Ht(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ve(r),Vt.bind(r)}function On(e){return Se(e,!1)}function Z(e){if(x===null)return e();const t=x;x=null;try{return e()}finally{x=t}}function dt(e){return P===null||(P.cleanups===null?P.cleanups=[e]:P.cleanups.push(e)),e}function Tn(e,t){const n=Symbol("context");return{id:n,Provider:jn(n),defaultValue:e}}function Fn(e){let t;return(t=tn(P,e.id))!==void 0?t:e.defaultValue}function Rn(e){const t=pe(e),n=pe(()=>pt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Vt(){if(this.sources&&this.state)if(this.state===oe)Ve(this);else{const e=T;T=null,Se(()=>qe(this),!1),T=e}if(x){const e=this.observers?this.observers.length:0;x.sources?(x.sources.push(this),x.sourceSlots.push(e)):(x.sources=[this],x.sourceSlots=[e]),this.observers?(this.observers.push(x),this.observerSlots.push(x.sources.length-1)):(this.observers=[x],this.observerSlots=[x.sources.length-1])}return this.value}function Xt(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Se(()=>{for(let l=0;l<e.observers.length;l+=1){const i=e.observers[l],s=tt&&tt.running;s&&tt.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?T.push(i):re.push(i),i.observers&&Zt(i)),s||(i.state=oe)}if(T.length>1e6)throw T=[],new Error},!1)),t}function Ve(e){if(!e.fn)return;Xe(e);const t=P,n=x,r=Ke;x=P=e,Dn(e,e.value,r),x=n,P=t}function Dn(e,t,n){let r;try{r=e.fn(t)}catch(l){return e.pure&&(e.state=oe,e.owned&&e.owned.forEach(Xe),e.owned=null),e.updatedAt=n+1,en(l)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Xt(e,r):e.value=r,e.updatedAt=n)}function Ht(e,t,n,r=oe,l){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:P,context:null,pure:n};return P===null||P!==Yt&&(P.owned?P.owned.push(i):P.owned=[i]),i}function Jt(e){if(e.state===0)return;if(e.state===Be)return qe(e);if(e.suspense&&Z(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ke);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===oe)Ve(e);else if(e.state===Be){const r=T;T=null,Se(()=>qe(e,t[0]),!1),T=r}}function Se(e,t){if(T)return e();let n=!1;t||(T=[]),re?n=!0:re=[],Ke++;try{const r=e();return In(n),r}catch(r){n||(re=null),T=null,en(r)}}function In(e){if(T&&(Qt(T),T=null),e)return;const t=re;re=null,t.length&&Se(()=>Nn(t),!1)}function Qt(e){for(let t=0;t<e.length;t++)Jt(e[t])}function qe(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const l=r.state;l===oe?r!==t&&(!r.updatedAt||r.updatedAt<Ke)&&Jt(r):l===Be&&qe(r,t)}}}function Zt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Be,n.pure?T.push(n):re.push(n),n.observers&&Zt(n))}}function Xe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const i=l.pop(),s=n.observerSlots.pop();r<l.length&&(i.sourceSlots[s]=r,l[r]=i,n.observerSlots[r]=s)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Xe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Ln(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function en(e,t=P){throw Ln(e)}function tn(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:tn(e.owner,t):void 0}function pt(e){if(typeof e=="function"&&!e.length)return pt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=pt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function jn(e,t){return function(r){let l;return k(()=>l=Z(()=>(P.context={[e]:r.value},Rn(()=>r.children))),void 0),l}}const Bn=Symbol("fallback");function Ot(e){for(let t=0;t<e.length;t++)e[t]()}function qn(e,t,n={}){let r=[],l=[],i=[],s=0,o=t.length>1?[]:null;return dt(()=>Ot(i)),()=>{let p=e()||[],u,a;return p[Mn],Z(()=>{let m=p.length,h,c,d,g,y,v,$,_,w;if(m===0)s!==0&&(Ot(i),i=[],r=[],l=[],s=0,o&&(o=[])),n.fallback&&(r=[Bn],l[0]=Ie(C=>(i[0]=C,n.fallback())),s=1);else if(s===0){for(l=new Array(m),a=0;a<m;a++)r[a]=p[a],l[a]=Ie(f);s=m}else{for(d=new Array(m),g=new Array(m),o&&(y=new Array(m)),v=0,$=Math.min(s,m);v<$&&r[v]===p[v];v++);for($=s-1,_=m-1;$>=v&&_>=v&&r[$]===p[_];$--,_--)d[_]=l[$],g[_]=i[$],o&&(y[_]=o[$]);for(h=new Map,c=new Array(_+1),a=_;a>=v;a--)w=p[a],u=h.get(w),c[a]=u===void 0?-1:u,h.set(w,a);for(u=v;u<=$;u++)w=r[u],a=h.get(w),a!==void 0&&a!==-1?(d[a]=l[u],g[a]=i[u],o&&(y[a]=o[u]),a=c[a],h.set(w,a)):i[u]();for(a=v;a<m;a++)a in d?(l[a]=d[a],i[a]=g[a],o&&(o[a]=y[a],o[a](a))):l[a]=Ie(f);l=l.slice(0,s=m),r=p.slice(0)}return l});function f(m){if(i[a]=m,o){const[h,c]=Kt(a);return o[a]=c,t(p[a],h)}return t(p[a])}}}function N(e,t){return Z(()=>e(t||{}))}const zn=e=>`Stale read from <${e}>.`;function ze(e){const t="fallback"in e&&{fallback:()=>e.fallback};return pe(qn(()=>e.each,e.children,t||void 0))}function Tt(e){const t=e.keyed,n=pe(()=>e.when,void 0,{equals:(r,l)=>t?r===l:!r==!l});return pe(()=>{const r=n();if(r){const l=e.children;return typeof l=="function"&&l.length>0?Z(()=>l(t?r:()=>{if(!Z(n))throw zn("Show");return e.when})):l}return e.fallback},void 0,void 0)}function Un(e,t,n){let r=n.length,l=t.length,i=r,s=0,o=0,p=t[l-1].nextSibling,u=null;for(;s<l||o<i;){if(t[s]===n[o]){s++,o++;continue}for(;t[l-1]===n[i-1];)l--,i--;if(l===s){const a=i<r?o?n[o-1].nextSibling:n[i-o]:p;for(;o<i;)e.insertBefore(n[o++],a)}else if(i===o)for(;s<l;)(!u||!u.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[i-1]&&n[o]===t[l-1]){const a=t[--l].nextSibling;e.insertBefore(n[o++],t[s++].nextSibling),e.insertBefore(n[--i],a),t[l]=n[i]}else{if(!u){u=new Map;let f=o;for(;f<i;)u.set(n[f],f++)}const a=u.get(t[s]);if(a!=null)if(o<a&&a<i){let f=s,m=1,h;for(;++f<l&&f<i&&!((h=u.get(t[f]))==null||h!==a+m);)m++;if(m>a-o){const c=t[s];for(;o<a;)e.insertBefore(n[o++],c)}else e.replaceChild(n[o++],t[s++])}else s++;else t[s++].remove()}}}const Ft="_$DX_DELEGATE";function Gn(e,t,n,r={}){let l;return Ie(i=>{l=i,t===document?e():b(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{l(),t.textContent=""}}function F(e,t,n){let r;const l=()=>{const s=document.createElement("template");return s.innerHTML=e,n?s.content.firstChild.firstChild:s.content.firstChild},i=t?()=>Z(()=>document.importNode(r||(r=l()),!0)):()=>(r||(r=l())).cloneNode(!0);return i.cloneNode=i,i}function He(e,t=window.document){const n=t[Ft]||(t[Ft]=new Set);for(let r=0,l=e.length;r<l;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Wn))}}function nn(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function R(e,t){t==null?e.removeAttribute("class"):e.className=t}function le(e,t,n={}){const r=Object.keys(t||{}),l=Object.keys(n);let i,s;for(i=0,s=l.length;i<s;i++){const o=l[i];!o||o==="undefined"||t[o]||(Rt(e,o,!1),delete n[o])}for(i=0,s=r.length;i<s;i++){const o=r[i],p=!!t[o];!o||o==="undefined"||n[o]===p||!p||(Rt(e,o,!0),n[o]=p)}return n}function b(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ue(e,t,r,n);k(l=>Ue(e,t(),l,n),r)}function Rt(e,t,n){const r=t.trim().split(/\s+/);for(let l=0,i=r.length;l<i;l++)e.classList.toggle(r[l],n)}function Wn(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const l=n[`${t}Data`];if(l!==void 0?r.call(n,l,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Ue(e,t,n,r,l){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,s=r!==void 0;if(e=s&&n[0]&&n[0].parentNode||e,i==="string"||i==="number")if(i==="number"&&(t=t.toString()),s){let o=n[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),n=ae(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||i==="boolean")n=ae(e,n,r);else{if(i==="function")return k(()=>{let o=t();for(;typeof o=="function";)o=o();n=Ue(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],p=n&&Array.isArray(n);if(ht(o,t,n,l))return k(()=>n=Ue(e,o,n,r,!0)),()=>n;if(o.length===0){if(n=ae(e,n,r),s)return n}else p?n.length===0?Dt(e,o,r):Un(e,n,o):(n&&ae(e),Dt(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=ae(e,n,r,t);ae(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function ht(e,t,n,r){let l=!1;for(let i=0,s=t.length;i<s;i++){let o=t[i],p=n&&n[i],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))l=ht(e,o,p)||l;else if(u==="function")if(r){for(;typeof o=="function";)o=o();l=ht(e,Array.isArray(o)?o:[o],Array.isArray(p)?p:[p])||l}else e.push(o),l=!0;else{const a=String(o);p&&p.nodeType===3&&p.data===a?e.push(p):e.push(document.createTextNode(a))}}return l}function Dt(e,t,n=null){for(let r=0,l=t.length;r<l;r++)e.insertBefore(t[r],n)}function ae(e,t,n,r){if(n===void 0)return e.textContent="";const l=r||document.createTextNode("");if(t.length){let i=!1;for(let s=t.length-1;s>=0;s--){const o=t[s];if(l!==o){const p=o.parentNode===e;!i&&!s?p?e.replaceChild(l,o):e.insertBefore(l,n):p&&o.remove()}else i=!0}}else e.insertBefore(l,n);return[l]}const Yn="_root_7vb0q_1",Kn="_content_7vb0q_5",It={root:Yn,content:Kn},j={Init:"Init",PlayerMove:"PlayerMove",Finish:"Finish"},Vn=6,Xn=[{name:"Aces",icon:"",isMatch:e=>ue(e,1)},{name:"Deuces",icon:"",isMatch:e=>ue(e,2)},{name:"Threes",icon:"",isMatch:e=>ue(e,3)},{name:"Fours",icon:"",isMatch:e=>ue(e,4)},{name:"Fives",icon:"",isMatch:e=>ue(e,5)},{name:"Sixes",icon:"",isMatch:e=>ue(e,6)}];let rn={name:"Extra",icon:"",isMatch:(e,t)=>tr(t)>=63?35:!1};const Hn=[{name:"Three of a kind",icon:"",isMatch:e=>e.find(n=>n>=3)?nt(e):!1},{name:"Four of a kind",icon:"",isMatch:e=>e.find(n=>n>=4)?nt(e):!1},{name:"Full house",icon:"",isMatch:e=>{let t=e;return t.includes(2)&&t.includes(3)?25:!1}},{name:"Small straight",icon:"",isMatch:e=>{let t=e;return t[0]&&t[1]&&t[2]&&t[3]||t[1]&&t[2]&&t[3]&&t[4]||t[2]&&t[3]&&t[4]&&t[5]?30:!1}},{name:"Large straight",icon:"",isMatch:e=>{let t=e;return t[0]&&t[1]&&t[2]&&t[3]&&t[4]||t[1]&&t[2]&&t[3]&&t[4]&&t[5]?40:!1}},{name:"Yacht",icon:"",isMatch:e=>e.includes(5)?50:!1},{name:"Chance",icon:"",isMatch:e=>nt(e)}];function Jn(e,t){return{name:e,icon:t,scores:Qn()}}function Qn(){return{Aces:null,Deuces:null,Threes:null,Fours:null,Fives:null,Sixes:null,Extra:null,"Three of a kind":null,"Four of a kind":null,"Full house":null,"Small straight":null,"Large straight":null,Yacht:null,Chance:null}}function ue(e,t){let n=Zn(e,t);return n?n*t:!1}function Zn(e,t){return e[t-1]}function er(e){let t=[0,0,0,0,0,0];return e.forEach(n=>t[n.val-1]++),t}function nt(e){return e.reduce((t,n,r)=>t+n*(r+1),0)}function tr(e){return(e.Aces||0)+(e.Deuces||0)+(e.Threes||0)+(e.Fours||0)+(e.Fives||0)+(e.Sixes||0)}function nr(e){return e.Aces!==null&&e.Deuces!==null&&e.Threes!==null&&e.Fours!==null&&e.Fives!==null&&e.Sixes!==null}function rr(e){return e==="Aces"||e==="Deuces"||e==="Threes"||e==="Fours"||e==="Fives"||e==="Sixes"}function mt(){return[{val:1,id:0,pos:0,state:"cup",coords:""},{val:1,id:1,pos:1,state:"cup",coords:""},{val:1,id:2,pos:2,state:"cup",coords:""},{val:1,id:3,pos:3,state:"cup",coords:""},{val:1,id:4,pos:4,state:"cup",coords:""}]}function ln(){let e={status:j.Init},t=[],n=mt();return{stage:e,players:t,dices:n}}function lr(e){let t=cr(e.stage);if(!t)return null;let n=e.dices.map(r=>r.state!=="kept"?{...r,state:"spinning"}:r);return{stage:t,dices:n}}function ir(e){let t=fr(e.stage);if(!t)return null;let n=e.dices.filter(l=>l.state==="spinning").map(()=>Math.floor(Math.random()*6)+1).sort((l,i)=>i-l);return{dices:e.dices.map(l=>l.state==="spinning"?{...l,val:n.pop(),state:"table"}:l),stage:t}}function sr(e){let t=ln();return t.players=e.map(n=>Jn(n.name,n.icon)),t.stage={status:j.PlayerMove,player:0,step:0,spinning:!1},t}function or(e){return e.status===j.PlayerMove&&e.spinning}function ar(e){return e.status===j.PlayerMove&&!e.spinning&&e.step<3}function ur(e){return e.status===j.PlayerMove&&e.step===3}function cr(e){return e.status===j.PlayerMove&&e.step<3?{...e,spinning:!0}:!1}function fr(e){return e.status===j.PlayerMove&&e.spinning?{...e,spinning:!1,step:e.step+1}:!1}function dr(e){return e.status===j.PlayerMove&&e.spinning}function pr(e){return e.players.length>1&&e.players.every(t=>t.name.trim()!=="")}function hr(e,t){if(e.stage.status===j.PlayerMove&&t.name!=="Extra"){let n=[...e.players];if(n[e.stage.player].scores={...n[e.stage.player].scores,[t.name]:t.score},rr(t.name)&&nr(n[e.stage.player].scores)){let l=rn.isMatch([],n[e.stage.player].scores)||0;n[e.stage.player].scores={...n[e.stage.player].scores,Extra:l}}let r=(e.stage.player+1)%e.players.length;return mr(n[r])?{players:n,dices:mt(),stage:{status:j.Finish,winners:yr(n)}}:{players:n,dices:mt(),stage:{...e.stage,player:r,step:0}}}return null}function mr(e){return Object.values(e.scores).every(t=>t!==null)}function gr(e){let t=Object.values(e.scores),n=0;for(let r=0;r<t.length;r++)n+=t[r]||0;return n}function yr(e){let t=e.map(l=>gr(l)),n=Math.max(...t),r=[];for(let l=0;l<t.length;l++)t[l]===n&&r.push(l);return r}const vr="_root_1eweb_1",br="_scoreRow_1eweb_8",$r="_scoreCell_1eweb_12",_r="_matched_1eweb_21",wr="_done_1eweb_30",z={root:vr,scoreRow:br,scoreCell:$r,matched:_r,done:wr};function kt(e,t){for(let n in e)t(e[n],n)}function I(e,t){e.forEach(t)}function B(e,t){if(!e)throw Error(t)}function ee({node:e=[],from:t,source:n,parent:r=t||n,to:l,target:i,child:s=l||i,scope:o={},meta:p={},family:u={type:"regular"},regional:a}={}){let f=Ee(r),m=Ee(u.links),h=Ee(u.owners),c=[];I(e,g=>g&&Q(c,g));let d={id:Tr(),seq:c,next:Ee(s),meta:p,scope:o,family:{type:u.type||"crosslink",links:m,owners:h}};return I(m,g=>Q(Je(g),d)),I(h,g=>Q(Qe(g),d)),I(f,g=>Q(g.next,d)),a&&de&&At(Me(de),[d]),d}function Ge(e,t,n){let r,l=W,i=null,s=S;if(e.target&&(t=e.params,n=e.defer,r=e.meta,l="page"in e?e.page:l,e.stack&&(i=e.stack),s=Re(e)||s,e=e.target),s&&S&&s!==S&&(S=null),Array.isArray(e))for(let c=0;c<e.length;c++)ne("pure",l,K(e[c]),i,t[c],s,r);else ne("pure",l,K(e),i,t,s,r);if(n&&!De)return;let o,p,u,a,f,m,h={isRoot:De,currentPage:W,scope:S,isWatch:ot,isPure:Le};De=0;e:for(;a=Lr();){let{idx:c,stack:d,type:g}=a;u=d.node,W=f=d.page,S=Re(d),f?m=f.reg:S&&(m=S.reg);let y=!!f,v=!!S,$={fail:0,scope:u.scope};o=p=0;for(let _=c;_<u.seq.length&&!o;_++){let w=u.seq[_];if(w.order){let{priority:C,barrierID:A}=w.order,E=A?f?`${f.fullID}_${A}`:A:0;if(_!==c||g!==C){A?st.has(E)||(st.add(E),bt(_,d,C,A)):bt(_,d,C);continue e}A&&st.delete(E)}switch(w.type){case"mov":{let A,E=w.data;switch(E.from){case ie:A=Me(d);break;case"a":case"b":A=d[E.from];break;case"value":A=E.store;break;case"store":if(m&&!m[E.store.id])if(y){let et=hn(f,E.store.id);d.page=f=et,et?m=et.reg:v?(we(S,E.store,0,1,E.softRead),m=S.reg):m=void 0}else v&&we(S,E.store,0,1,E.softRead);A=Ne(m&&m[E.store.id]||E.store)}switch(E.to){case ie:d.value=A;break;case"a":case"b":d[E.to]=A;break;case"store":jr(f,S,u,E.target).current=A}break}case"compute":let C=w.data;if(C.fn){ot=D(u,"op")==="watch",Le=C.pure;let A=C.safe?(0,C.fn)(Me(d),$.scope,d):qr($,C.fn,d);C.filter?p=!A:d.value=A,ot=h.isWatch,Le=h.isPure}}o=$.fail||p}if(!o){let _=Me(d),w=Re(d);if(I(u.next,C=>{ne("child",f,C,d,_,w)}),w){D(u,"needFxCounter")&&ne("child",f,w.fxCount,d,_,w),D(u,"storeChange")&&ne("child",f,w.storeChange,d,_,w),D(u,"warnSerialize")&&ne("child",f,w.warnSerializeNode,d,_,w);let C=w.additionalLinks[u.id];C&&I(C,A=>{ne("child",f,A,d,_,w)})}}}De=h.isRoot,W=h.currentPage,S=Re(h)}function sn(e,t="combine"){let n=t+"(",r="",l=0;return kt(e,i=>{l<25&&(i!=null&&(n+=r,n+=se(i)?on(i).fullName:i.toString()),l+=1,r=", ")}),n+")"}function Sr(e,t){let n,r,l=e;if(t){let i=on(t);e.length===0?(n=i.path,r=i.fullName):(n=i.path.concat([e]),r=i.fullName.length===0?e:i.fullName+"/"+e)}else n=e.length===0?[]:[e],r=e;return{shortName:l,fullName:r,path:n}}function xt(e,t){let n=t?e:e[0];dn(n);let r=n.or,l=n.and;if(l){let i=t?l:l[0];if(X(i)&&"and"in i){let s=xt(l,t);e=s[0],r={...r,...s[1]}}else e=l}return[e,r]}function G(e,...t){let n=fn();if(n){let r=n.handlers[e];if(r)return r(n,...t)}}function M(e,t){let n=Te({or:t,and:typeof e=="string"?{name:e}:e}),r=(s,...o)=>(ve(!D(r,"derived"),"call of derived event","createEvent"),ve(!Le,"unit call from pure function","operators like sample"),W?((p,u,a,f)=>{let m=W,h=null;if(u)for(h=W;h&&h.template!==u;)h=ye(h);qt(h);let c=p.create(a,f);return qt(m),c})(r,l,s,o):r.create(s,o)),l=fn(),i=Object.assign(r,{graphite:ee({meta:yn(n.actualOp||"event",r,n),regional:1}),create:s=>(Ge({target:r,params:s,scope:S}),s),watch:s=>gn(r,s),map:s=>at(r,ge,s,[V()]),filter:s=>at(r,"filter",s.fn?s:s.fn,[V(Pt,1)]),filterMap:s=>at(r,"filterMap",s,[V(),be(o=>!L(o),1)]),prepend(s){let o=M("* → "+r.shortName,{parent:ye(r)});return G("eventPrepend",K(o)),ke(o,r,[V()],"prepend",s),zr(r,o),o}});return n!=null&&n.domain&&n.domain.hooks.event(i),ce(i,"id",i.graphite.id),cn(i.graphite),i}function Lt(e,t,n,r){return Ye(n,t,"first argument"),B(H(r),"second argument should be a function"),ve(!D(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),I(Array.isArray(n)?n:[n],l=>{e.off(l),We(e).set(l,mn(vn(l,e,"on",Dr,r)))}),e}function he(e,t){let n=Te(t),r=_e(e),l=M({named:"updates",derived:1});G("storeBase",r);let i=r.id,s={subscribers:new Map,updates:l,defaultState:e,stateRef:r,getState(){let h,c=r;if(W){let d=W;for(;d&&!d.reg[i];)d=ye(d);d&&(h=d)}return!h&&S&&(we(S,r,1),h=S),h&&(c=h.reg[i]),Ne(c)},setState:h=>Ge({target:s,params:h,defer:1,scope:S}),reset:(...h)=>(I(h,c=>Lt(s,".reset",c,()=>s.defaultState)),s),on:(h,c)=>Lt(s,".on",h,c),off(h){let c=We(s).get(h);return c&&(c(),We(s).delete(h)),s},map(h,c){let d,g;X(h)&&(d=h,h=h.fn),ve(L(c),"second argument of store.map","updateFilter");let y=s.getState();L(y)||(g=h(y,c));let v=he(g,{name:`${s.shortName} → *`,derived:1,and:d}),$=vn(s,v,ge,yt,h);return vt(Y(v),{type:ge,fn:h,from:r}),Y(v).noInit=1,G("storeMap",r,$),v},watch(h,c){if(!c||!se(h)){let d=gn(s,h);return G("storeWatch",r,h)||h(s.getState()),d}return B(H(c),"second argument should be a function"),h.watch(d=>c(s.getState(),d))}},o=yn("store",s,n),p=s.defaultConfig.updateFilter;s.graphite=ee({scope:{state:r,fn:p},node:[be((h,c,d)=>(d.scope&&!d.scope.reg[r.id]&&(d.b=1),h)),$e(r),be((h,c,{a:d,b:g})=>!L(h)&&(h!==d||g),1),p&&V(yt,1),U({from:ie,target:r})],child:l,meta:{...o,defaultState:e},regional:1}),ce(s,"id",s.graphite.id),ce(s,"rootStateRefId",i);let u=D(s,"serialize"),a=D(s,"derived"),f=u==="ignore",m=D(s,"sid");return m&&(ce(s,"storeChange",1),r.sid=m),m||f||a||ce(s,"warnSerialize",1),B(a||!L(e),"current state can't be undefined, use null instead"),At(s,[l]),n!=null&&n.domain&&n.domain.hooks.store(s),a||(s.reinit=M({named:"reinit"}),s.reset(s.reinit)),r.meta=s.graphite.meta,cn(s.graphite),s}function kr(...e){let t,n,r;[e,r]=xt(e);let l,i,s,o=e[e.length-1];if(H(o)?(n=e.slice(0,-1),t=o):n=e,n.length===1){let p=n[0];te(p)||(l=p,i=1)}if(!i&&(l=n,t)){s=1;let p=t;t=u=>p(...u)}return B(X(l),"shape should be an object"),Ur(Array.isArray(l),!s,l,r,t)}function xr(){let e={};return e.req=new Promise((t,n)=>{e.rs=t,e.rj=n}),e.req.catch(()=>{}),e}function Cr(e,t){Ye(e,"merge","first argument");let n=M({name:sn(e,"merge"),derived:1,and:t});return ke(e,n,[],"merge"),n}function Ar(e,t){let n=0;return I(Gr,r=>{r in e&&(B(e[r]!=null,bn(t,r)),n=1)}),n}function me(...e){let t,n,r,l,[[i,s,o],p]=xt(e),u=1;return L(s)&&X(i)&&Ar(i,"sample")&&(s=i.clock,o=i.fn,u=!i.greedy,l=i.filter,t=i.target,n=i.name,r=i.sid,i=i.source),Wr("sample",s,i,l,t,o,n,p,u,1,0,r)}function Pr(e,{scope:t,safe:n}={}){B(t||S||n,"scopeBind cannot be called outside of forked .watch");let r=t||S;return gt(e)?l=>{let i=xr();return Ge({target:e,params:{params:l,req:i},scope:r}),i.req}:l=>(Ge({target:e,params:l,scope:r}),l)}let Er=typeof Symbol<"u"&&Symbol.observable||"@@observable",ge="map",ie="stack",K=e=>e.graphite||e,Je=e=>e.family.owners,Qe=e=>e.family.links,Y=e=>e.stateRef,Me=e=>e.value,We=e=>e.subscribers,ye=e=>e.parent,Re=e=>e.scope,D=(e,t)=>K(e).meta[t],ce=(e,t,n)=>K(e).meta[t]=n,on=e=>e.compositeName,se=e=>(H(e)||X(e))&&"kind"in e;const Fe=e=>t=>se(t)&&t.kind===e;let te=Fe("store"),Mr=Fe("event"),gt=Fe("effect"),an=Fe("domain"),Nr=Fe("scope");var rt={__proto__:null,unit:se,store:te,event:Mr,effect:gt,domain:an,scope:Nr,attached:e=>gt(e)&&D(e,"attached")==1};let lt=(e,t)=>{let n=e.indexOf(t);n!==-1&&e.splice(n,1)},Q=(e,t)=>e.push(t),ve=(e,t,n)=>!e&&console.error(`${t} is deprecated${n?`, use ${n} instead`:""}`);const Ct=()=>{let e=0;return()=>""+ ++e};let Or=Ct(),un=Ct(),Tr=Ct(),de=null,cn=e=>{},fn=()=>de,Fr=e=>(e&&de&&de.sidRoot&&(e=`${de.sidRoot}|${e}`),e),At=(e,t)=>{let n=K(e);I(t,r=>{let l=K(r);n.family.type!=="domain"&&(l.family.type="crosslink"),Q(Je(l),n),Q(Qe(n),l)})},Ee=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(K),X=e=>typeof e=="object"&&e!==null,H=e=>typeof e=="function",L=e=>e===void 0,dn=e=>B(X(e)||H(e),"expect first argument be an object");const jt=(e,t,n,r)=>B(!(!X(e)&&!H(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${n} to be a unit (store, event or effect)${r}`);let Ye=(e,t,n)=>{Array.isArray(e)?I(e,(r,l)=>jt(r,t,`${l} item of ${n}`,"")):jt(e,t,n," or array of units")},Rr=(e,t,n="target")=>I(Ee(t),r=>ve(!D(r,"derived"),`${e}: derived unit in "${n}"`,"createEvent/createStore")),yt=(e,{fn:t},{a:n})=>t(e,n),Dr=(e,{fn:t},{a:n})=>t(n,e),Pt=(e,{fn:t})=>t(e);const pn=(e,t,n,r)=>{let l={id:un(),type:e,data:t};return n&&(l.order={priority:n},r&&(l.order.barrierID=++Ir)),l};let Ir=0,U=({from:e="store",store:t,target:n,to:r=n?"store":ie,batch:l,priority:i})=>pn("mov",{from:e,store:t,to:r,target:n},i,l),Oe=({fn:e,batch:t,priority:n,safe:r=0,filter:l=0,pure:i=0})=>pn("compute",{fn:e,safe:r,filter:l,pure:i},n,t),Et=({fn:e})=>Oe({fn:e,priority:"effect"}),be=(e,t,n)=>Oe({fn:e,safe:1,filter:t,priority:n&&"effect"}),$e=(e,t,n)=>U({store:e,to:t?ie:"a",priority:n&&"sampler",batch:1}),V=(e=Pt,t)=>Oe({fn:e,pure:1,filter:t}),it={mov:U,compute:Oe,filter:({fn:e,pure:t})=>Oe({fn:e,filter:1,pure:t}),run:Et},_e=e=>({id:un(),current:e}),Ne=({current:e})=>e,vt=(e,t)=>{e.before||(e.before=[]),Q(e.before,t)},fe=null;const Mt=(e,t)=>{if(!e)return t;if(!t)return e;let n;return(e.v.type===t.v.type&&e.v.id>t.v.id||$t(e.v.type)>$t(t.v.type))&&(n=e,e=t,t=n),n=Mt(e.r,t),e.r=e.l,e.l=n,e},Nt=[];let Bt=0;for(;Bt<6;)Q(Nt,{first:null,last:null,size:0}),Bt+=1;const Lr=()=>{for(let e=0;e<6;e++){let t=Nt[e];if(t.size>0){if(e===3||e===4){t.size-=1;let r=fe.v;return fe=Mt(fe.l,fe.r),r}t.size===1&&(t.last=null);let n=t.first;return t.first=n.r,t.size-=1,n.v}}},ne=(e,t,n,r,l,i,s)=>bt(0,{a:null,b:null,node:n,parent:r,value:l,page:t,scope:i,meta:s},e),bt=(e,t,n,r=0)=>{let l=$t(n),i=Nt[l],s={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};l===3||l===4?fe=Mt(fe,s):(i.size===0?i.first=s:i.last.r=s,i.last=s),i.size+=1},$t=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},st=new Set;let S,De=1,ot=0,Le=0,W=null,qt=e=>{W=e};const hn=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ye(e);if(e)return e}return null};let jr=(e,t,n,r,l)=>{let i=hn(e,r.id);return i?i.reg[r.id]:t?(we(t,r,l),t.reg[r.id]):r};const Br=e=>e;let we=(e,t,n,r,l)=>{var i;let s=e.reg,o=t.sid,p=t==null||(i=t.meta)===null||i===void 0?void 0:i.serialize,u=e.fromSerialize&&p!=="ignore"&&p?.read||Br;if(s[t.id])return;let a={id:t.id,current:t.current,meta:t.meta};if(a.id in e.values.idMap)a.current=e.values.idMap[a.id];else if(o&&o in e.values.sidMap&&!(o in e.sidIdMap))a.current=u(e.values.sidMap[o]);else if(t.before&&!l){let f=0,m=n||!t.noInit||r;I(t.before,h=>{switch(h.type){case ge:{let c=h.from;if(c||h.fn){c&&we(e,c,n,r);let d=c&&s[c.id].current;m&&(a.current=h.fn?h.fn(d):d)}break}case"field":f||(f=1,a.current=Array.isArray(a.current)?[...a.current]:{...a.current}),we(e,h.from,n,r),m&&(a.current[h.field]=s[s[h.from.id].id].current)}})}o&&(e.sidIdMap[o]=t.id),s[t.id]=a};const qr=(e,t,n)=>{try{return t(Me(n),e.scope,n)}catch(r){console.error(r),e.fail=1,e.failReason=r}};let Te=(e,t={})=>(X(e)&&(Te(e.or,t),kt(e,(n,r)=>{L(n)||r==="or"||r==="and"||(t[r]=n)}),Te(e.and,t)),t);const zt=(e,t)=>{lt(e.next,t),lt(Je(e),t),lt(Qe(e),t)},_t=(e,t,n)=>{let r;e.next.length=0,e.seq.length=0,e.scope=null;let l=Qe(e);for(;r=l.pop();)zt(r,e),(t||n&&D(e,"op")!=="sample"||r.family.type==="crosslink")&&_t(r,t,D(r,"op")!=="on"&&n);for(l=Je(e);r=l.pop();)zt(r,e),n&&r.family.type==="crosslink"&&_t(r,t,D(r,"op")!=="on"&&n)},Ce=e=>e.clear();let wt=(e,{deep:t}={})=>{let n=0;if(e.ownerSet&&e.ownerSet.delete(e),te(e))Ce(We(e));else if(an(e)){n=1;let r=e.history;Ce(r.events),Ce(r.effects),Ce(r.stores),Ce(r.domains)}_t(K(e),!!t,n)},mn=e=>{let t=()=>wt(e);return t.unsubscribe=t,t},ke=(e,t,n,r,l)=>ee({node:n,parent:e,child:t,scope:{fn:l},meta:{op:r},family:{owners:[e,t],links:t},regional:1}),gn=(e,t)=>(B(H(t),".watch argument should be a function"),mn(ee({scope:{fn:t},node:[Et({fn:Pt})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),zr=(e,t,n="event")=>{ye(e)&&ye(e).hooks[n](t)},yn=(e,t,n)=>{let r=Te(n),l=e==="domain",i=Or(),{sid:s=null,named:o=null,domain:p=null,parent:u=p}=r,a=o||r.name||(l?"":i),f=Sr(a,u),m={op:t.kind=e,name:t.shortName=a,sid:t.sid=Fr(s),named:o,unitId:t.id=i,serialize:r.serialize,derived:r.derived,config:r};return t.parent=u,t.compositeName=f,t.defaultConfig=r,t.thru=h=>(ve(0,"thru","js pipe"),h(t)),t.getType=()=>f.fullName,!l&&(t.subscribe=h=>(dn(h),t.watch(H(h)?h:c=>h.next&&h.next(c))),t[Er]=()=>t),m};const at=(e,t,n,r)=>{let l;X(n)&&(l=n,n=n.fn);let i=M({name:`${e.shortName} → *`,derived:1,and:l});return ke(e,i,r,t,n),i},vn=(e,t,n,r,l)=>{let i=Y(t),s=U({store:i,to:"a",priority:"read"});n===ge&&(s.data.softRead=1);let o=[s,V(r)];return G("storeOnMap",i,o,te(e)&&Y(e)),ke(e,t,o,n,l)},Ur=(e,t,n,r,l)=>{let i=e?c=>[...c]:c=>({...c}),s=e?[]:{},o=i(s),p=_e(o),u=_e(1);p.type=e?"list":"shape",p.noInit=1,G("combineBase",p,u);let a=he(o,{name:sn(n),derived:1,and:r}),f=Y(a);f.noInit=1,ce(a,"isCombine",1);let m=$e(p);m.order={priority:"barrier"};let h=[be((c,d,g)=>(g.scope&&!g.scope.reg[p.id]&&(g.c=1),c)),m,U({store:u,to:"b"}),be((c,{key:d},g)=>{if(g.c||c!==g.a[d])return t&&g.b&&(g.a=i(g.a)),g.a[d]=c,1},1),U({from:"a",target:p}),U({from:"value",store:0,target:u}),U({from:"value",store:1,target:u,priority:"barrier",batch:1}),$e(p,1),l&&V()];return kt(n,(c,d)=>{if(!te(c))return B(!se(c)&&!L(c),`combine expects a store in a field ${d}`),void(o[d]=s[d]=c);s[d]=c.defaultState,o[d]=c.getState();let g=ke(c,a,h,"combine",l);g.scope.key=d;let y=Y(c);vt(p,{type:"field",field:d,from:y}),G("combineField",y,g)}),a.defaultShape=n,vt(f,{type:ge,from:p,fn:l}),a.defaultState=l?f.current=l(o):s,a};ee({node:[Et({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}});const Gr=["source","clock","target"],bn=(e,t)=>e+`: ${t} should be defined`;let Wr=(e,t,n,r,l,i,s,o,p,u,a,f)=>{let m=!!l;B(!L(n)||!L(t),bn(e,"either source or clock"));let h=0;L(n)?h=1:se(n)||(n=kr(n)),L(t)?t=n:(Ye(t,e,"clock"),Array.isArray(t)&&(t=Cr(t))),h&&(n=t),o||s||(s=n.shortName);let c="none";(a||r)&&(se(r)?c="unit":(B(H(r),"`filter` should be function or unit"),c="fn")),l?(Ye(l,e,"target"),Rr(e,l)):c==="none"&&u&&te(n)&&te(t)?l=he(i?i(Ne(Y(n)),Ne(Y(t))):Ne(Y(n)),{name:s,sid:f,or:o}):(l=M({name:s,derived:1,or:o}),G("sampleTarget",K(l)));let d=_e(),g=[];if(c==="unit"){let[_,w]=Ut(r,l,t,d,e);g=[...ut(w),...ut(_)]}let[y,v]=Ut(n,l,t,d,e),$=ke(t,l,[G("sampleSourceLoader"),U({from:ie,target:d}),...ut(v),$e(y,1,p),...g,$e(d),c==="fn"&&V((_,w,{a:C})=>r(_,C),1),i&&V(yt),G("sampleSourceUpward",m)],e,i);return At(n,[$]),Object.assign($.meta,o,{joint:1}),l};const ut=e=>[$e(e),be((t,n,{a:r})=>r,1)],Ut=(e,t,n,r,l)=>{let i=te(e),s=i?Y(e):_e(),o=_e(i);return i||ee({parent:e,node:[U({from:ie,target:s}),U({from:"value",store:1,target:o})],family:{owners:[e,t,n],links:t},meta:{op:l},regional:1}),G("sampleSource",o,s,r),[s,o]},Yr=["car","truck","doll","ball","bear","puzzle","train","sandbox","bike","pen","balloon"],Kr=["red","green","blue","yellow","black","white","dark","light","brown","gray","pink","purple","orange","violet"];function St(e){return e[Math.floor(Math.random()*e.length)]}function ct(){return`${St(Kr)} ${St(Yr)}`}function Vr(){const e=["❤️","🎄","🤗","🤞","🙏","👍","😜"];let t=he([{name:ct(),icon:"👍",error:""}]),n=he(""),r=M(),l=M(),i=M(),s=M(),o=M(),p=M();return t.on(r,u=>{if(u.length>=Vn)return u;let a=e.filter(h=>!u.some(c=>c.icon===h)),f=St(a)||"🚫",m=ct();for(;u.some(h=>h.name===m);)m=ct();return[...u,{name:m,icon:f,error:""}]}).on(l,(u,a)=>{if(u.length===0)return u;let f=u.slice();return f.splice(a,1),f}).on(i,(u,{n:a,name:f})=>{let m=u.slice();return m[a].name=f,m}).on(s,(u,{n:a,icon:f})=>{let m=u.slice();return m[a].icon=f,m}).on(o,u=>u.map(a=>a.icon?a.name?u.filter(f=>f.icon===a.icon).length>1?{...a,error:"Please, choose an unique icon"}:{...a,error:""}:{...a,error:"You need name for a comfortable game"}:{...a,error:"You need an icon for a comfortable game"})),me({source:t,clock:o,fn:u=>u.length<2?"should be at least 2 players:(":"",target:n}),me({source:[t,n],clock:o,filter:([u,a])=>u.length>=2&&a===""&&u.every(f=>f.error===""),fn:([u])=>u,target:p}),{ICONS:e,$players:t,$formError:n,formSubmitted:o,playersApplied:p,nameChanged:i,iconChanged:s,addPlayerClicked:r,removePlayerClicked:l}}let Xr=ln(),O=he(Xr),q=Vr(),$n=O.map(e=>e.dices),Ze=O.map(e=>e.players),Hr=O.map(e=>e.stage.status===j.Init),Jr=$n.map(e=>sl(e)),Qr=$n.map(e=>{let t=e.filter(n=>n.state==="table"||n.state==="kept");return t.length===5?er(t):null}),_n=O.map(e=>"player"in e.stage?e.stage.player:0),Zr=O.map(e=>ar(e.stage)),el=O.map(e=>dr(e.stage)),tl=O.map(e=>or(e.stage)),nl=O.map(e=>ur(e.stage)),rl=O.map(e=>pr(e)),ll=M(),wn=M(),Sn=M(),kn=M(),xn=M(),Cn=M();me({source:O,clock:wn,filter:Zr,fn:e=>{let t=lr(e);return t?{...e,...t}:e},target:O});me({source:O,clock:Sn,filter:el,fn:e=>{let t=ir(e);return t?{...e,...t}:e},target:O});me({source:O,clock:Cn,fn:(e,t)=>{let n=hr(e,t);return n?{...e,...n}:e},target:O});me({clock:q.playersApplied,fn:e=>sr(e),target:O});O.on(kn,(e,{diceNumber:t})=>{let n=e.dices.map(r=>r.id===t?{...r,state:"kept"}:r);return{...e,dices:n}}).on(xn,(e,{diceNumber:t})=>{let n=e.dices.map(r=>r.id===t?{...r,state:"table"}:r);return{...e,dices:n}});function il(e){let t=[],n=[];return e.forEach(r=>{r.state==="kept"?t.push(r):r.state==="table"&&n.push(r)}),{kept:t,table:n}}function sl(e){const t={left:8,top:6};let n=50,r=8,l=n*5+r*4;function i(f){return(l-(f*n+(f-1)*r))/2}let{table:s,kept:o}=il(e);s.sort((f,m)=>f.val-m.val||f.pos-m.pos),o.sort((f,m)=>f.val-m.val||f.pos-m.pos),s.forEach((f,m)=>{f.pos=m}),o.forEach((f,m)=>{f.pos=m});let p=i(o.length),u=i(s.length);return e.map(f=>{if(f.state==="kept"){let m=t.left+p+f.pos*(n+r);return{...f,coords:`translateX(${m}px) translateY(${t.top}px)`}}else if(f.state==="table"){let m=t.left+u+f.pos*(n+r);return{...f,coords:`translateX(${m}px) translateY(${t.top+60}px)`}}else return{...f,coords:`translateX(${t.left+110}px) translateY(${t.top+130}px)`}})}q.addPlayerClicked();q.formSubmitted();function xe(e,t){var n;return((r,l)=>{let i=!rt.unit(r)&&typeof r=="object",s={};r&&"@@unitShape"in r?typeof r["@@unitShape"]=="function"?s=r["@@unitShape"]():ft("expect @@unitShape to be a function"):s=i?r:{unit:r};let o=Array.isArray(s),p=Object.entries(s),u=o?[]:{},a=[],f={},m={};for(let[c,d]of p)if(rt.store(d))if(f[d.graphite.id]){let g=f[d.graphite.id];u[c]=u[g],m[c]=u[g]}else{a.push(d),f[d.graphite.id]=c;let[g,y]=Kt(Gt(d,l));u[c]=g,m[c]=y}else rt.unit(d)||ft("expected useUnit argument to be a unit"),u[c]=l?Pr(d,{scope:l}):d;let h=[it.compute({priority:"effect"}),it.compute({priority:"sampler",batch:1}),it.run({fn:()=>{On(()=>{for(let c of a)m[f[c.graphite.id]](()=>Gt(c,l))})}})];if(l){let c=ee({node:h}),d=l.additionalLinks,g=[];a.forEach(y=>{let v=y.graphite.id,$=d[v]||[];d[v]=$,$.push(c),g.push($)}),dt(()=>{g.forEach(y=>{let v=y.indexOf(c);v!==-1&&y.splice(v,1)}),wt(c)})}else{let c=ee({node:h,parent:a,family:{owners:a}});dt(()=>{wt(c)})}return i?u:u.unit})(e,((r=1)=>{let l=Fn(ol);return r&&!l&&ft("No scope found, consider adding <Provider> to app root"),l})((n=t?.forceScope)!==null&&n!==void 0?n:0))}let ft=e=>{throw Error(e)};const Gt=(e,t)=>t?t.getState(e):e.getState();let ol=Tn(null);const al=F("<div><div><p>Scores:</p></div><div></div><p>---</p><div>"),ul=F("<p>"),An=F("<div><p>"),Pn=F('<button type="button" disabled>'),cl=F('<button type="button">'),fl=F('<button type="button"> '),dl=()=>{let[e]=xe([Ze]);function t(){return`150px${" 50px".repeat(e().length)}`}return(()=>{const n=al(),r=n.firstChild;r.firstChild;const l=r.nextSibling,i=l.nextSibling,s=i.nextSibling;return b(r,N(ze,{get each(){return e()},children:o=>(()=>{const p=ul();return b(p,()=>o.icon),k(()=>nn(p,"title",o.name)),p})()}),null),b(l,()=>Xn.map(o=>N(Wt,{category:o}))),b(n,N(pl,{category:rn}),i),b(s,N(ze,{each:Hn,children:o=>N(Wt,{category:o})})),k(o=>{const p=z.root,u={[z.scoreRow]:!0},a=t();return p!==o._v$&&R(n,o._v$=p),o._v$2=le(r,u,o._v$2),a!==o._v$3&&((o._v$3=a)!=null?r.style.setProperty("grid-template-columns",a):r.style.removeProperty("grid-template-columns")),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},Wt=e=>{let[t,n,r]=xe([Ze,_n,Qr]);const{isMatch:l,name:i}=e.category;function s(){return`150px${" 50px".repeat(t().length)}`}return(()=>{const o=An(),p=o.firstChild;return b(p,i),b(o,()=>t().map((u,a)=>{if(u.scores[i]!==null)return(()=>{const c=Pn();return b(c,()=>u.scores[i]),k(()=>R(c,z.scoreCell)),c})();let m=n()===a,h=r();if(m&&h){const c=l(h,u.scores)||0;return(()=>{const d=cl();return d.$$click=()=>Cn({score:c,name:i}),b(d,c),k(g=>le(d,{[z.scoreCell]:!0,[z.matched]:!0},g)),d})()}return(()=>{const c=fl();return k(d=>le(c,{[z.scoreCell]:!0,[z.done]:!0},d)),c})()}),null),k(u=>{const a={[z.scoreRow]:!0},f=s();return u._v$4=le(o,a,u._v$4),f!==u._v$5&&((u._v$5=f)!=null?o.style.setProperty("grid-template-columns",f):o.style.removeProperty("grid-template-columns")),u},{_v$4:void 0,_v$5:void 0}),o})()},pl=e=>{const{name:t}=e.category;let[n]=xe([Ze]);function r(){return`150px${" 50px".repeat(n().length)}`}return(()=>{const l=An(),i=l.firstChild;return b(i,t),b(l,N(ze,{get each(){return n()},children:(s,o)=>(()=>{const p=Pn();return b(p,()=>s.scores[t]),k(u=>le(p,{[z.scoreCell]:!0,[z.done]:!0},u)),p})()}),null),k(s=>{const o={[z.scoreRow]:!0},p=r();return s._v$6=le(l,o,s._v$6),p!==s._v$7&&((s._v$7=p)!=null?l.style.setProperty("grid-template-columns",p):l.style.removeProperty("grid-template-columns")),s},{_v$6:void 0,_v$7:void 0}),l})()};He(["click"]);const hl="_root_1n8n8_1",ml="_keep_1n8n8_8",gl="_dice_1n8n8_17",yl="_spinner_1n8n8_35",vl="_spin_1n8n8_35",bl="_cupBtn_1n8n8_44",$l="_shaking_1n8n8_53",_l="_shake_1n8n8_1",wl="_noShake_1n8n8_56",Sl="_cup_1n8n8_44",J={root:hl,keep:ml,dice:gl,spinner:yl,spin:vl,cupBtn:bl,shaking:$l,shake:_l,noShake:wl,cup:Sl},kl=""+new URL("cup-5a929258.webp",import.meta.url).href,xl=F('<div><div></div><button><img alt="cup">'),Cl=F("<button>"),Al=F("<div>"),Pl=()=>{let[e,t,n]=xe([Jr,tl,nl]);return(()=>{const r=xl(),l=r.firstChild,i=l.nextSibling,s=i.firstChild;return b(r,N(Ae,{get dice(){return e()[0]}}),i),b(r,N(Ae,{get dice(){return e()[1]}}),i),b(r,N(Ae,{get dice(){return e()[2]}}),i),b(r,N(Ae,{get dice(){return e()[3]}}),i),b(r,N(Ae,{get dice(){return e()[4]}}),i),i.$$click=()=>{t()?Sn():wn()},nn(s,"src",kl),k(o=>{const p=J.root,u=J.keep,a={[J.cupBtn]:!0,[J.shaking]:t(),[J.noShake]:n()},f=J.cup;return p!==o._v$&&R(r,o._v$=p),u!==o._v$2&&R(l,o._v$2=u),o._v$3=le(i,a,o._v$3),f!==o._v$4&&R(s,o._v$4=f),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r})()},Ae=e=>{function t(){e.dice.state==="table"?kn({diceNumber:e.dice.id}):e.dice.state==="kept"&&xn({diceNumber:e.dice.id})}return(()=>{const n=Cl();return n.$$click=t,b(n,(()=>{const r=pe(()=>e.dice.state==="spinning");return()=>r()?(()=>{const l=Al();return k(()=>R(l,J.spinner)),l})():e.dice.val})()),k(r=>{const l=J.dice,i=e.dice.coords;return l!==r._v$5&&R(n,r._v$5=l),i!==r._v$6&&((r._v$6=i)!=null?n.style.setProperty("transform",i):n.style.removeProperty("transform")),r},{_v$5:void 0,_v$6:void 0}),n})()};He(["click"]);const El="_root_w8k78_1",Ml="_list_w8k78_5",Nl="_player_w8k78_10",Ol="_error_w8k78_16",Tl="_footer_w8k78_24",Pe={root:El,list:Ml,player:Nl,error:Ol,footer:Tl},Fl=F('<div><div></div><div><button type="button">add new player</button></div><div><button type="button">START</button></div><p>'),Rl=F('<div><div><select name=""><option value="">-</option></select><input type="text"><button type="button">delete</button></div><p>'),Dl=F("<option>"),Il=()=>{let[e,t]=xe([q.$players,q.$formError]);return(()=>{const n=Fl(),r=n.firstChild,l=r.nextSibling,i=l.firstChild,s=l.nextSibling,o=s.firstChild,p=s.nextSibling;return b(r,N(ze,{get each(){return e()},children:(u,a)=>(()=>{const f=Rl(),m=f.firstChild,h=m.firstChild;h.firstChild;const c=h.nextSibling,d=c.nextSibling,g=m.nextSibling;return h.addEventListener("change",y=>{q.iconChanged({n:a(),icon:y.target.value})}),b(h,()=>q.ICONS.map(y=>(()=>{const v=Dl();return v.value=y,b(v,y),v})()),null),c.$$input=y=>{q.nameChanged({n:a(),name:y.target.value})},d.$$click=()=>q.removePlayerClicked(a()),b(g,()=>u.error||""),k(y=>{const v=Pe.player,$=Pe.error;return v!==y._v$4&&R(m,y._v$4=v),$!==y._v$5&&R(g,y._v$5=$),y},{_v$4:void 0,_v$5:void 0}),k(()=>h.value=u.icon),k(()=>c.value=u.name),f})()})),l.style.setProperty("text-align","center"),i.$$click=()=>q.addPlayerClicked(),s.style.setProperty("text-align","right"),o.$$click=()=>q.formSubmitted(),b(p,t),k(u=>{const a=Pe.root,f=Pe.list,m=Pe.error;return a!==u._v$&&R(n,u._v$=a),f!==u._v$2&&R(r,u._v$2=f),m!==u._v$3&&R(p,u._v$3=m),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()};He(["click","input"]);const Ll=F('<div><button type="button">RESTART'),jl=F("<div><ul></ul><p>stage: "),Bl=F("<div><div><h1>Yacht</h1><div>"),ql=F("<li> "),zl=()=>{let[e,t,n,r,l]=xe([O,Hr,rl,Ze,_n]);return(()=>{const i=Bl(),s=i.firstChild,o=s.firstChild,p=o.nextSibling;return p.style.setProperty("display","grid"),p.style.setProperty("gap","8px"),p.style.setProperty("grid-template-columns","auto 1fr"),b(p,N(Tt,{get when(){return t()},get children(){return N(Il,{})}}),null),b(p,N(Tt,{get when(){return e().stage.status!==j.Init},get children(){return[(()=>{const u=Ll(),a=u.firstChild;return b(u,N(dl,{}),a),a.$$click=()=>ll(),k(()=>a.disabled=!n()),u})(),(()=>{const u=jl(),a=u.firstChild,f=a.nextSibling;return f.firstChild,b(u,N(Pl,{}),a),a.style.setProperty("list-style","none"),a.style.setProperty("padding","0"),b(a,()=>r().map((m,h)=>{let c=l()===h;return(()=>{const d=ql(),g=d.firstChild;return(c?"bold":"initial")!=null?d.style.setProperty("font-weight",c?"bold":"initial"):d.style.removeProperty("font-weight"),b(d,()=>m.icon,g),b(d,()=>m.name,null),d})()})),b(f,()=>JSON.stringify(e().stage),null),u})()]}}),null),k(u=>{const a=It.root,f=It.content;return a!==u._v$&&R(i,u._v$=a),f!==u._v$2&&R(s,u._v$2=f),u},{_v$:void 0,_v$2:void 0}),i})()};He(["click"]);const Ul=document.getElementById("root");Gn(()=>N(zl,{}),Ul);
